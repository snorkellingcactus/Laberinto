<html>
<head>
<script type="text/javascript" src="./pared.js"></script>
<script type="text/javascript" src="./teclado.js"></script>
<script type="text/javascript" src="./charl.js"></script>
<script type="text/javascript" src="creaParedes.js"></script>
<script type="text/javascript" src="mat.js"></script>
<link rel="stylesheet" type="text/css" href="./index.css" />
</head>
<body>

<span id="string"></span>
<div Id="caja"></div>
<input type="hidden" id="teclado"/>

	<script>
				function genPuntos(event)
				{
					var nCol=paredA.puntosCol.length-1;
					
					window.console.log(event);
					paredA.procesaPuntos
					(
						[
							[event.pageX,event.pageY]
						]
					)
					
					for(var i=nCol;i<paredA.puntosCol.length-1;i++)
					{
						var pCol=pared.puntosCol[i];
						var pColSig=pared.puntosCol[i+1];
						document.body.appendChild
						(
							graficaPuntos(pCol , pColSig)
						);
					}
				}
				document.body.addEventListener
				(
					"click",
					genPuntos
				);
				var paredA=creaMapa
				(
					0,
					[
						[100,100],
						[150,100]
					],
					[
						20,
						30
					]
				);
				
				charl=new Tipito
				(
					10,
					10
				);
				charl.refresca=function()
				{
					document.getElementById("caja").style.left=this.posX+"px";
					document.getElementById("caja").style.top=this.posY+"px";
				};
				charl.refresca();
				
				/*verifCol=new VerifCol
				(
					new PuntoCol
					(
						charl.posX,
						charl.posY
					),
					paredA.puntosCol[0].posY,
					paredB.puntosCol[5].posY,
					paredA.puntosCol[3].posX,
					paredB.puntosCol[3].posX
				)*/
				
				mueveIzq=new TeclaEvt
				(
					{
						jugador:charl,
						keydown:function()
						{
							this.jugador.setPosX(-2);
							this.jugador.refresca();
						}
					}
				);
				
				mueveDer=new TeclaEvt
				(
					{
						jugador:charl,
						keydown:function()
						{
							this.jugador.setPosX(2);
							this.jugador.refresca();
						}
					}
				);
				
				mueveAr=new TeclaEvt
				(
					{
						jugador:charl,
						keydown:function()
						{
							this.jugador.setPosY(-2);
							this.jugador.refresca();
						}
					}
				);
				
				mueveAb=new TeclaEvt
				(
					{
						jugador:charl,
						keydown:function()
						{
							this.jugador.setPosY(2);
							this.jugador.refresca();
						}
					}
				);
				capTeclado=new Teclado();
				capTeclado.nEvt(39 , mueveDer);
				capTeclado.nEvt(37 , mueveIzq);
				capTeclado.nEvt(38 , mueveAr);
				capTeclado.nEvt(40 , mueveAb);
				
				
				document.body.addEventListener
				(
					"keydown",
					function(event)
					{
						capTeclado.detona(event)
					}
				);
				document.body.addEventListener
				(
					"keyup",
					function(event)
					{
						capTeclado.detona(event)
					}
				);
				
		</script>
</body>
</html>